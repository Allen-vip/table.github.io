(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports={detail_card_star:"orders_detail_card_star__2sE0O",orders:"orders_orders__2QXTr",header:"orders_header__14bfg",title:"orders_title__Y1JEj",subtitle:"orders_subtitle__WTxPa",content:"orders_content__3Ho-B",content_nav:"orders_content_nav__2oVri",active:"orders_active__3hk-h",content_body:"orders_content_body__1GUHb",menu_section:"orders_menu_section__V_Hyl",content_menu:"orders_content_menu__2t-CB",pre_active:"orders_pre_active__2ho-m",after_active:"orders_after_active__3-oF-",content_list:"orders_content_list__cLgB6",content_card:"orders_content_card__1Pi_2",content_card_title:"orders_content_card_title__3YSBR",content_card_body:"orders_content_card_body__1xBCu",content_card_intro:"orders_content_card_intro__3_wAh",content_card_amount:"orders_content_card_amount__FhteA",content_card_originPrice:"orders_content_card_originPrice__2jspw",content_sold:"orders_content_sold__wtdVh",footer:"orders_footer__12IeT",cart:"orders_cart__1rrHB",about:"orders_about__qehQC",about_info:"orders_about_info__IAihW",takeout:"orders_takeout__CD1EZ",tags:"orders_tags__3iNKt",intro:"orders_intro__32Z2y",reviews:"orders_reviews__1OCea",reviews_title:"orders_reviews_title__rdx9v"}},119:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAMFBMVEVHcEz/x2T/x2T/xFv/x2T/x2X/x2T/x2X/x2T/yGT/x2T/yGT/yWT/yGH/yGT/x2WY7cYNAAAAD3RSTlMAc+8HReFl+MdShpcWKKNVeZnDAAAApElEQVQoz2NgoB5gUUMT4PhkgCow/78AqkD//2BUI/7//4ZqxP//X1EE/P///58A5zFfkY4HCmhLXobwM0A8CIgAW6X/HwH+gASmIwmAVbDUw/lQq93hAlCL4Ep+wux1gvC/T4AJMEIEfjPgFOCDCPxA9hoIfIILmENtOQATuA/0/FKggAMi/D4JM6f+R4Ti+k+LgYEg9P8BTCB9DThYhBZQKU4BmKmQrVV3DqUAAAAASUVORK5CYII="},12:function(e,t,a){e.exports={view:"component_view__ogXRA",view_body:"component_view_body__2sTBs",star_flex:"component_star_flex__Q8VJQ",reviews_card:"component_reviews_card__1LNnZ",reviews_header:"component_reviews_header__2GnMJ",reviews_info:"component_reviews_info__2Acwy",reviews_message:"component_reviews_message__3ubGD",reviews_imgs:"component_reviews_imgs__2IMuo",content_calc:"component_content_calc__Yo_z6",content_min:"component_content_min__3RKIe",content_plus:"component_content_plus__2z83Q",content_num:"component_content_num__3mU0Y",modal:"component_modal__1MjWS",modal_body:"component_modal_body__FmUoL",modal_content:"component_modal_content__2qNH6",modal_btn:"component_modal_btn__zLibZ",modal_title:"component_modal_title__3Ir7S",modal_info:"component_modal_info__16wQI",info:"component_info__pcT9Y",border:"component_border__3Z-yq",bold:"component_bold__3yd8w",title:"component_title__2MVYq",btn_list:"component_btn_list__23dt_"}},120:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAANlBMVEVHcEz/x2T/xmT/x2T/v1T/xmT/x2T/yGX/x2T/xmT/x2T/x2T/yGT/x2T/wWL/x2T/xWP/x2XWNu53AAAAEXRSTlMA6M+8B1FdcEDzfpiN2xWmKBXq8jEAAADRSURBVDjLzVNJEsMgDGMxi1lC9P/P1qTTlIaUc3wiIyHZMlHqeRW1XxMMNK1wByCsBexSIgpqsOjCir5Dpf8CTN3mVmKLoWgkOXlwDnEfQd8Mo5c9xNtxRrXnPB3VVq59rEK2unO27/R58gxjIsIoK1wYjEILXGwZbfhMgLtmwMP4cca7aB4E5qaFUG7JZ7UfC3O36Z5uTE6m2cATTgCpaHrEoqSxXwk7arSSeKmAcXaewkE2woEUeaHw/PAkGk7v5VCQTbUrwXPZvg0lDg/6F1/RwAmTi2BNSgAAAABJRU5ErkJggg=="},15:function(e,t,a){e.exports={evaluate_view:"evaluate_evaluate_view__uEJ9Q",view:"evaluate_view__2HLz5",view_body:"evaluate_view_body__LQW-0",section:"evaluate_section__C0jzf",dishes_section:"evaluate_dishes_section__3BNPL",title:"evaluate_title__3jpUV",big_star:"evaluate_big_star__9W0zm",res_evaluate_section:"evaluate_res_evaluate_section__CmCnM",res_arrow:"evaluate_res_arrow__2EgqD",hide:"evaluate_hide__3C1kg",detail_more:"evaluate_detail_more__2p_eV",show_more:"evaluate_show_more__1ZYAr",evaluate_info:"evaluate_evaluate_info__3Bq-R",photo_upload:"evaluate_photo_upload__2QXPW",res_evaluate:"evaluate_res_evaluate__2jzx5",confirm_footer:"evaluate_confirm_footer__sTa8X",review_form:"evaluate_review_form__1MW4R"}},168:function(e,t,a){e.exports={home_ul:"routers_home_ul__34UPJ",home:"routers_home__5E7fL",home_body:"routers_home_body__393rV",home_footer:"routers_home_footer__3K1pD",active:"routers_active__1P_-H"}},17:function(e,t,a){e.exports={confirm_view:"orderCheck_confirm_view__1hayv",confirm_view_body:"orderCheck_confirm_view_body__19goO",title:"orderCheck_title__3irpp",cart_line:"orderCheck_cart_line__-zdMc",card:"orderCheck_card__3wuRB",card_info:"orderCheck_card_info__11WBZ",line_flex:"orderCheck_line_flex__KnhMW",price:"orderCheck_price__r2Kfq",confirm_type:"orderCheck_confirm_type__2EeSP",active:"orderCheck_active__302lW",sign_icon:"orderCheck_sign_icon__3rGTt",tips:"orderCheck_tips__23Ot_",confirm_footer:"orderCheck_confirm_footer__1FIHR",field_edit:"orderCheck_field_edit__3_3UI",field_close:"orderCheck_field_close__2vpIh",arrow_right:"orderCheck_arrow_right__3qEZ4",confirm_coustom:"orderCheck_confirm_coustom__17EAn",order_help:"orderCheck_order_help__3oqUc",btn_list:"orderCheck_btn_list__S8HQQ",enter:"orderCheck_enter__2e2ap",email:"orderCheck_email__kV3OQ",detail_more:"orderCheck_detail_more__XHjG0",show_more:"orderCheck_show_more__ZwL-f",under_handle:"orderCheck_under_handle__259cF"}},216:function(e,t,a){},238:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAgCAMAAADaHo1mAAAAn1BMVEVHcEz/cEj/v2b/sm7/lF3/pGj/n2n/jl7/tHL/kGb/ZjL/2pr/Yyv/68H/umX/4Kr/6rz/6r3/////t2f/wGb/sWf/q2j/h2z/gGz/u2b/g2z/lGr/fGf/mmr/ynn/dlj/b0n/1ZH/pWn/n2n/aTr/4Kr/7ML/jmv/Yiv/+vf/6Nz/8uz/sY7/vaL/2cj/x6f/tJ3/nn//xZH/zrj/z6ow+PKxAAAAEnRSTlMAi+e/P5HyGw7T7n/C183vSp9RMz8GAAACqUlEQVRIx7VW23abMBCE2JgQ27ngGhEoaQttVSFxM/7/b+uOEBfHnJ6TBs+Dd5C0M9JKBlnWiOeX/f73p7HfvzxbM7jfPv1aDE/b+/f62x8LY3s5/dXb4lhNFrG++3ID3K17ffcm+uTgmvo8vt4Ij12VnMOt8OroAh1vZnDQRXKOHU4j3o4jTkLkx//FAUvYmAd/xHkypvL9jxkczmfKD0CD44aOaGAwNQgGaIPgIzj5vhzT15bTczI+C98vKahxePo5g8CxVukE0vcrCiQrhS/yE3EYpOkxl5J6VE5TACGoErwNiJZSqj7kuU+Zea+4srwZg7Q0tSrStNAGlFWSpuia23TkkKLeUx9MsxHMNtYmm4AMCgoK0yzIRWYZDDKiZdddFhVJKM3luSXeZlmuW7pgVtArzhs0RYEEqlJn0GKiWVbDS7eU4KLRXF4a6NmNihvLSyaAAYUsSeuqoi0XSUISqHVDzdiOtm1pOTl4iQzqaxIoE+8CDAbBzLNW8bVB0ppKdgYgMGiHcyzBW5Oh/mGQrCwnngAGFDDrsqJiC82xhJyaMetCo9YcGdiQmJRr4jCIYxgMgtyx1jMGXULSG8gGe6mpFlVK6eZYqwk9vtDjrwxi+iZs+AgYUMChjBuqteAcm4wfX3FMt+JobzUvVY1zxTlGFkWuB3GlH3pFvOwuDWoKdVd3AQMcHS0hG170W9DwC64M1QZc758RxMvOZSNggIhNFjUZMAYDxmBdMlZIGOcNxtQjj/DfEC32gJ4UOoyg/qbZ7AoRUypic1B13TDT1Qw84oZGjLFJot19M73oCmEYRnMIw4uegYdzCaFnLhZul7c83OHaEn69AcL1eDFyvW+Lw3Mvrnb294Vhv7+duvbDz8XwYLtzF+y1vds9/Pksdjt7UnzrL4e6PcKElJPoAAAAAElFTkSuQmCC"},239:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAANlBMVEVHcEz/x2P/x2T/x2T/x2T/x2T/wFj/x2T/yGT/x2T/xWP/yGT/xmT/w2H/x2T/x2T/xmP/x2Vhb1hgAAAAEXRSTlMATubbgfQGmGtcPHTOFLqlImwUBd0AAADASURBVDjLzZNLEoQgDESDfBIE0b7/ZQdkxkGhWJsVVh4N3UGi95W3fg4sWNysLwBkLqCnEh7giMktdAYUtJsIgGks4VYxbE/Aw7Koo+2aWFq1mGivK53CD0BTGaA1cFrKx9a4b4GzQpuI9IDcE/NPQJ6JqjtgAPXwqVpg7fvnpgsw/7uOARkB6XZE7IFvmFHlUW2w/TAuo9qXd3HQ2IVlXVRS76KGaTZyPiMWYWSC63Cc5EntvcL+P9YZG170L34AwGgOoZyLVMoAAAAASUVORK5CYII="},241:function(e,t,a){e.exports=a.p+"static/media/examples@2x.95b9de60.png"},242:function(e,t,a){e.exports=a.p+"static/media/sumary_NeedHelp@2x.79b6e611.png"},246:function(e,t,a){e.exports=a(466)},27:function(e,t,a){e.exports={info:"orderInfo_info__1JTwh",info_body:"orderInfo_info_body__3aWDb",content_calc:"orderInfo_content_calc__1TvyK",content_min:"orderInfo_content_min__LBOYM",content_plus:"orderInfo_content_plus__1praM",content_num:"orderInfo_content_num__v7_1k",info_content:"orderInfo_info_content__3iSBT",info_title:"orderInfo_info_title__3ffzW",info_content_left:"orderInfo_info_content_left__2hP-1",info_price:"orderInfo_info_price__3iNlu",info_star:"orderInfo_info_star__9mu2v",info_footer:"orderInfo_info_footer__2gZ_W",info_reviews:"orderInfo_info_reviews__3AR94",banner:"orderInfo_banner__2TPHo",footer:"orderInfo_footer__1evzu",cart:"orderInfo_cart__1_RFK",bannerList:"orderInfo_bannerList__2KBVZ",content_card_originPrice:"orderInfo_content_card_originPrice__MkoS-"}},28:function(e,t,a){e.exports={payment:"paymentResult_payment__3kB2b",payment_body:"paymentResult_payment_body__3Q6TQ",payment_icon:"paymentResult_payment_icon__3xsNP",title:"paymentResult_title__oURVa",order_ino:"paymentResult_order_ino__9gUSi",info:"paymentResult_info__2aygj",enter:"paymentResult_enter__3RKaH",email:"paymentResult_email__2LjiV",active:"paymentResult_active__3uAu9",btn_list:"paymentResult_btn_list__3UQy3",can_lottery:"paymentResult_can_lottery__3oK-7",can_lottery_section:"paymentResult_can_lottery_section__1q1db",scratch:"paymentResult_scratch__2C6F2",field_edit:"paymentResult_field_edit__3u_WP",field_close:"paymentResult_field_close__LGqcH",gift_card:"paymentResult_gift_card__2IpBe",scratch_card:"paymentResult_scratch_card__1s29g"}},309:function(e,t){},34:function(e,t,a){e.exports={order_preview:"orderPreview_order_preview__22Sf2",confirm_view:"orderPreview_confirm_view__2rkew",confirm_view_body:"orderPreview_confirm_view_body__61MQo",title:"orderPreview_title__2Q25h",in_your_cart:"orderPreview_in_your_cart__YwJTu",card:"orderPreview_card__3lt_E",card_info:"orderPreview_card_info__1hyFx",line_flex:"orderPreview_line_flex__3Pky1",price:"orderPreview_price__1wyVu",confirm_type:"orderPreview_confirm_type__Wt-x6",active:"orderPreview_active__3FbJY",sign_icon:"orderPreview_sign_icon__HF9wx",tips:"orderPreview_tips__15Lnw",confirm_footer:"orderPreview_confirm_footer__1I9v1",field_edit:"orderPreview_field_edit__2SURv",field_close:"orderPreview_field_close__BHJXT",arrow_right:"orderPreview_arrow_right__3yJGN",confirm_coustom:"orderPreview_confirm_coustom__1Ezw6",btn_list:"orderPreview_btn_list__1-n1k"}},37:function(e,t,a){e.exports={card_gift:"cardGift_card_gift__8qRj8",card_gift_section:"cardGift_card_gift_section__2Qj3F",card_gift_title:"cardGift_card_gift_title__3cap8",section:"cardGift_section__1wCFO",active:"cardGift_active__3-pdH",sign_icon:"cardGift_sign_icon__1rdIz",expire:"cardGift_expire__3rUgt",card_line:"cardGift_card_line__2hJFV",section_left:"cardGift_section_left__2y5IX",section_middle:"cardGift_section_middle__1EZVJ"}},42:function(e,t,a){e.exports={confirm_view:"orderConfirm_confirm_view__1o1pv",view_body:"orderConfirm_view_body__wMTJ1",confirm_view_body:"orderConfirm_confirm_view_body__voZdR",title:"orderConfirm_title__cIhjB",enter_table:"orderConfirm_enter_table__1C5f9",confirm_footer:"orderConfirm_confirm_footer__1caCV",confirm_example:"orderConfirm_confirm_example__259md",orderConfirm:"orderConfirm_orderConfirm__2dYvz"}},466:function(e,t,a){"use strict";a.r(t);var n=a(21),r=a.n(n),o=(a(216),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function c(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var s=a(0),i=a.n(s),l=a(4),u=a(5),d=a(7),p=a(6),m=a(8),f=a(26),h=a(168),_=a.n(h),v=(a(36),a(10)),b=a.n(v),y=a(3),g=a(11),E=a.n(g),w=a(238),I=a.n(w),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={hoursList:[]},a.getHours=function(){return a.props.dispatch({type:"orders/regularHours",payload:{storeId:localStorage.storeId}})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.loading("loading"),this.getHours().then(function(t){b.a.hide(),e.setState({hoursList:t})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.businessInfo,n=t.labels,r=void 0===n?[]:n;return i.a.createElement("div",{className:E.a.about},i.a.createElement("div",{className:E.a.about_info},function(){var t=[];return e.state.hoursList.forEach(function(e,a){"OPEN"===e.status&&t.push(i.a.createElement("p",{key:a},"".concat(function(){return["Sun","Mon","Tues","Wed","Thurs","Fri","Sat"][arguments.length>0&&void 0!==arguments[0]?arguments[0]:0]}(e.dayOfWeek),":").concat(e.startTime,"-").concat(e.endTime)))}),t}(),i.a.createElement("p",null,"".concat(a.businessAddress," ").concat(a.city," ").concat(a.state," ").concat(a.zipcode)),i.a.createElement("p",null,a.phoneNumber)),i.a.createElement("div",{className:E.a.takeout},i.a.createElement("img",{src:I.a,alt:""}),i.a.createElement("div",{className:E.a.tags},r.map(function(e,t){return i.a.createElement("span",{key:t},i.a.createElement("b",null,e.labelName))}))),i.a.createElement("p",{className:E.a.intro},a.introduction))}}]),t}(i.a.Component),C=a(119),k=a.n(C),x=a(239),N=a.n(x),j=a(120),A=a.n(j),S=a(12),P=a.n(S),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.a.createElement("div",{className:"".concat(P.a.star_flex," ").concat(e.className?e.className:"")},function(){var t=e.totalReviewScore,a=e.reviewTimes,n=0;(n=e.score?e.score:a?t/a:0)>5&&(n=5);for(var r=window.parseInt(n),o=[],c=1;c<=r;c++)o.push(i.a.createElement("img",{src:k.a,alt:"",key:c}));n&&n<5&&(n+"").split(".")[1]&&o.push(i.a.createElement("img",{src:N.a,alt:"",key:o.length+1}));for(;o.length<5;)o.push(i.a.createElement("img",{src:A.a,alt:"",key:o.length+1}));return o}())},D=a(62),L=a.n(D),M=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props.reviews||[];return i.a.createElement("div",null,function(){var a=[];t.forEach(function(t,n){var r=t.review,o=void 0===r?{}:r;o.reviewTime||(o=t.foodItemReview),a.push(i.a.createElement("div",{className:P.a.reviews_card,key:n},i.a.createElement("div",{className:P.a.reviews_header},t.customerAvatarPictureUrl&&i.a.createElement("img",{src:t.customerAvatarPictureUrl,alt:""}),i.a.createElement("div",{className:P.a.reviews_info},i.a.createElement("span",null,t.customerUserName),i.a.createElement("div",{style:{marginTop:"0.05rem"}},i.a.createElement(T,{score:o[e.props.reviewStr||"comprehensiveScore"]}))),i.a.createElement("span",null,L()(o.reviewTime||o.reviewAt).tz("America/Los_Angeles").format("HH:mm:ss DD/MM/YYYY"))),i.a.createElement("p",{className:P.a.reviews_message},o.scoreContent),i.a.createElement("div",{className:P.a.reviews_imgs},function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e,t){return i.a.createElement("div",{key:t},i.a.createElement("img",{src:e,alt:""}))})}(t.pictureUrls))))});for(var n=0;n<3;n++);return a}())}}]),t}(s.Component);function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return void 0===t&&(t=12),+parseFloat(e.toPrecision(t))}function B(e){var t=e.toString().split(/[eE]/),a=(t[0].split(".")[1]||"").length-+(t[1]||0);return a>0?a:0}function G(e){if(-1===e.toString().indexOf("e"))return Number(e.toString().replace(".",""));var t=B(e);return t>0?R(e*Math.pow(10,t)):e}function U(e){(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&console.warn(e+" is beyond boundary when transfer to integer, the results may not be accurate")}function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=e.toString();return B(e)<=t?e:+parseFloat(a.substr(0,a.indexOf(".")+t+1))}function H(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];if(a.length>0)return H.apply(void 0,[H(e,t),a[0]].concat(a.slice(1)));var r=G(e),o=G(t),c=B(e)+B(t),s=r*o;return U(s),s/Math.pow(10,c)}function Y(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];if(a.length>0)return Y.apply(void 0,[Y(e,t),a[0]].concat(a.slice(1)));var r=Math.pow(10,Math.max(B(e),B(t)));return(H(e,r)+H(t,r))/r}function V(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],n=2;n<arguments.length;n++)a[n-2]=arguments[n];if(a.length>0)return V.apply(void 0,[V(e,t),a[0]].concat(a.slice(1)));var r=Math.pow(10,Math.max(B(e),B(t)));return(H(e,r)-H(t,r))/r}var W=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.businessInfo,a=e.reviews,n=void 0===a?[]:a;return i.a.createElement("div",{className:E.a.reviews},i.a.createElement("div",{className:E.a.reviews_title},i.a.createElement("span",null,R(t.totalReviewScore/t.reviewTimes,2)),i.a.createElement(T,{score:R(t.totalReviewScore/t.reviewTimes,2)}),i.a.createElement("span",null,t.reviewTimes," Ratings")),i.a.createElement(M,{reviews:n,reviewStr:this.props.reviewStr}))}}]),t}(i.a.Component);function z(e){return function(t){function a(){var e,t;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(d.a)(this,(e=Object(p.a)(a)).call.apply(e,[this].concat(r)))).hocLink=function(e){return function(){window.location.href=e}},t}return Object(m.a)(a,t),Object(u.a)(a,[{key:"showLoading",value:function(){b.a.loading("Loading...")}},{key:"hideLoading",value:function(){b.a.hide()}},{key:"render",value:function(){return i.a.createElement(e,Object.assign({},this.props,{hocLink:this.hocLink,showLoading:this.showLoading,hideLoading:this.hideLoading}))}}]),a}(s.Component)}a(449);var K=a(240),Q=a.n(K),Z=a(27),J=a.n(Z),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={visible:!0,seconds:a.props.seconds||10},a.closeModal=function(){a.props.close&&a.props.close()},a.timeServer=function(){a.timeout=setTimeout(function(){if(0===a.state.seconds)return a.timeout=null,a.props.onOk&&a.onOk(),!1;a.setState({seconds:a.state.seconds-1}),a.timeServer()},1e3)},a.onOk=function(){a.props.close(),a.props.onOk()},a.timeout=null,a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.props.hideSeconds||this.timeServer()}},{key:"render",value:function(){var e=this.props.className;return i.a.createElement("div",{className:P.a.modal,onClick:this.closeModal},i.a.createElement("div",{className:P.a.modal_body},i.a.createElement("div",{onClick:function(e){e.stopPropagation()},className:"".concat(P.a.modal_content," ").concat(e||"")},this.props.title&&i.a.createElement("p",{className:P.a.modal_title},this.props.title),this.props.content&&i.a.createElement("p",{className:P.a.modal_info},this.props.content),this.props.children,!this.props.hideBtn&&i.a.createElement("div",{className:P.a.modal_btn,onClick:this.props.onOk},this.props.btnText?this.props.btnText:"Sure",!this.props.hideSeconds&&i.a.createElement("span",null,"\uff08",this.state.seconds,"s\uff09")))))}}]),t}(s.Component),q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={itemCancel:!1},a.itemCancel=function(){a.setState({itemCancel:!a.state.itemCancel})},a.sureConfrim=function(){a.props.onChange(a.props.value-1)},a.plus=function(){var e=a.props.value||0;a.props.onChange(e+1)},a.min=function(){var e=a.props.value-1;a.props.validZero&&0===e?(a.setState({name:a.props.name}),a.itemCancel()):a.props.onChange(a.props.value-1)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:P.a.content_calc},this.props.value?i.a.createElement("span",{className:P.a.content_min,onClick:this.min}):null,this.props.value?i.a.createElement("span",{className:P.a.content_num},this.props.value):null,i.a.createElement("span",{className:P.a.content_plus,onClick:this.plus}),this.state.itemCancel&&i.a.createElement(X,{btnText:"Confirm",title:"Remove this item",content:this.state.name,hideBtn:!0,hideSeconds:!0,close:this.itemCancel},i.a.createElement("div",{className:P.a.btn_list},i.a.createElement("span",{onClick:this.itemCancel},"Cancel"),i.a.createElement("span",{onClick:this.sureConfrim},"Confirm"))))}}]),t}(s.Component),$=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).getFoodItemsDetail=function(e){return a.props.dispatch({type:"orders/getFoodItemsDetail",payload:{foodItemId:e}})},a.reviewsFoodItem=function(e){return a.props.dispatch({type:"orderInfo/reviewsFoodItem",payload:{foodItemId:e}})},a.hocLink=function(){window.history.go(-1)},a.orderChange=function(e){return function(t){a.props.dispatch({type:"orders/orderNumChange",payload:{foodItemId:e,num:t}})}};var n=a.props.foodItemId;return a.state={foodItemId:n},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){b.a.loading("Loading...")}},{key:"componentDidMount",value:function(){var e=this.state.foodItemId;this.getFoodItemsDetail(e),this.reviewsFoodItem(e).then(function(){b.a.hide()}),this.foodItemPicGet()}},{key:"foodItemPicGet",value:function(){var e=this,t=this.props.orders.getFoodItemsDetail,a=void 0===t?{}:t;this.props.dispatch({type:"orderInfo/foodItemPicGet",payload:{foodItemId:this.state.foodItemId}}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=a.foodItem,r=void 0===n?{}:n;r.primaryPictureUrl&&t.unshift({pictureUrl:r.primaryPictureUrl}),e.setState({pictureUrl:t})})}},{key:"render",value:function(){var e=this,t=this.props.orderInfo.reviewsFoodItemList,a=void 0===t?{}:t,n=this.props.orders.getFoodItemsDetail,r=void 0===n?{}:n,o=r.foodItem,c=void 0===o?{}:o;return i.a.createElement("div",{className:J.a.info},i.a.createElement("div",{className:J.a.banner},i.a.createElement(Q.a,{autoplay:!1,infinite:!0},(e.state.pictureUrl||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=e.pictureUrl;return i.a.createElement("a",{key:t,href:"javascrip:;",className:J.a.bannerList},i.a.createElement("img",{src:a,alt:""}))}))),i.a.createElement("div",{className:J.a.info_body},i.a.createElement("div",{className:J.a.info_title},i.a.createElement("span",null,c.name)),i.a.createElement("div",{className:J.a.info_content},i.a.createElement("div",{className:J.a.info_content_left},i.a.createElement("div",{className:J.a.info_price},i.a.createElement("span",null,"$",c.dailySpecialPrice?c.dailySpecialPrice:c.price),!!c.dailySpecialPrice&&i.a.createElement("span",{className:J.a.content_card_originPrice},"$",c.price)),i.a.createElement("div",{className:J.a.info_star},i.a.createElement(T,{totalReviewScore:c.totalReviewScore,reviewTimes:c.reviewTimes}),c.reviewTimes?i.a.createElement("span",null,R(c.totalReviewScore/c.reviewTimes,2)):i.a.createElement("span",null,"0.0"),i.a.createElement("span",null,r.orderTimes," sold"))),i.a.createElement(q,{value:c.num,onChange:this.orderChange(c.foodItemId)})),i.a.createElement("div",{className:J.a.info_footer},i.a.createElement("span",{className:J.a.info_footer_subtitle},"Ingredients"),i.a.createElement("p",null,c.complementaryIngredient||c.primaryIngredient)),i.a.createElement("div",{className:J.a.info_reviews},"Reviews"),i.a.createElement(M,{reviews:a,reviewStr:"score"}),i.a.createElement("div",{className:J.a.footer,onClick:this.props.close},i.a.createElement("div",{className:J.a.cart},i.a.createElement("span",null,"Back to menu")))))}}]),t}(s.Component),ee=Object(n.connect)(function(e){return{orderInfo:e.orderInfo,orders:e.orders}})($),te=a(34),ae=a.n(te),ne=a(24),re=a.n(ne),oe=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:re()(P.a.view,this.props.className)},this.props.title&&i.a.createElement("div",{className:P.a.title},this.props.title),i.a.createElement("div",{className:P.a.view_body},this.props.children),this.props.footer)}}]),t}(s.Component),ce=a(51),se=a(42),ie=a.n(se),le=a(241),ue=a.n(le),de=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={canConfirm:!1,firstDigit:"",secDigit:""},a.onSure=function(){var e=a.state.firstDigit+a.state.secDigit;a.props.lastTwoDigit===e?a.props.onSure():b.a.info("Please find the last two digits of your Order ID on your order ticket the staff has stuck on your table.",3)},a.firstInputChange=function(e){var t=e.target.value;t&&t.length>=1?(a.setState({firstDigit:t.substr(t.length-1,t.length)}),a.secInput()):a.setState({firstDigit:""})},a.secInputChange=function(e){var t=e.target.value;t&&t.length>=1?(a.setState({secDigit:t.substr(t.length-1,t.length)}),a.state.firstDigit||a.firstInput()):a.setState({secDigit:""})},a.firstInput=a.firstInput.bind(Object(ce.a)(a)),a.secInput=a.secInput.bind(Object(ce.a)(a)),console.log(a.props.lastTwoDigit),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"firstInput",value:function(){this.firstTextInput.focus()}},{key:"secInput",value:function(){this.secTextInput.focus()}},{key:"render",value:function(){var e=this,t=re.a.bind(ie.a)(ie.a.confirm_footer,{can_confirm:this.state.canConfirm});return i.a.createElement("div",{className:"".concat(ie.a.view," ").concat(ie.a.confirm_view)},i.a.createElement("div",{className:ie.a.title},"Confirm your table"),i.a.createElement("div",{className:ie.a.view_body},i.a.createElement("p",null,"Please find the last two digits of your Order ID on your order ticket the staff has stuck on your table."),i.a.createElement("div",{className:ie.a.enter_table},i.a.createElement("input",{type:"text",onChange:this.firstInputChange,value:this.state.firstDigit,ref:function(t){e.firstTextInput=t}}),i.a.createElement("input",{type:"text",value:this.state.secDigit,onChange:this.secInputChange,ref:function(t){e.secTextInput=t}})),i.a.createElement("div",{className:ie.a.confirm_example},i.a.createElement("span",null,"Order ticket example:"),i.a.createElement("img",{src:ue.a,alt:""}))),i.a.createElement("div",{className:t},i.a.createElement("span",{onClick:this.onSure},"Confirm")))}}]),t}(s.Component),pe="The staff will bring the food to you once it's ready. Thank you for your patience.",me=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={dinnerIn:!0,visible:!1,modalContent:pe,itemCancel:!1,orderInfo:{}},a.scanOrder=function(e){a.props.dispatch({type:"orderInfo/scanOrder",payload:Object(y.a)({},e)}).then(function(e){a.setState({orderInfo:e}),a.orderdishes({orderId:e.orderId})})},a.orderdishes=function(e){a.props.dispatch({type:"orders/orderdishes",payload:Object(y.a)({},e)}).then(function(e){b.a.hide(),a.setState({orderList:e})})},a.dinnerIn=function(e){return function(){var t="";t=!0===e?pe:"",a.setState({dinnerIn:e,modalContent:t})}},a.watchPhone=function(e){var t=e.target.value,n=void 0===t?"":t;if(n.length>11)return!1;n.length>0?a.setState({phoneNumber:n,showCloseIcon:!0}):a.setState({showCloseIcon:!1})},a.clearPhone=function(){a.setState({phoneNumber:""})},a.checkOrderConfirm=function(){"OCCUPIED"===a.props.orders.tableInfo.state?a.eatInStore():a.toggleVisible()},a.toggleVisible=function(){a.setState({visible:!a.state.visible})},a.orderChange=function(e){return function(t){a.props.dispatch({type:"orders/orderNumChange",payload:{foodItemId:e,num:t}})}},a.eatInStore=function(){var e=a.props.orders,t=e.foodItems,n=e.tableInfo,r=a.state.orderInfo,o=[];t.forEach(function(e){e.foodItem.num&&o.push({foodItemCount:e.foodItem.num,foodItemId:e.foodItem.foodItemId})});var c="orders/eatInStore",s={foodItems:o,storeId:a.props.storeId,tableNumber:a.props.tableNumber};if("OCCUPIED"===n.state&&(c="orders/addMoreDishes",s.lastTwoDigit=r.uuid.substring(6,8),!a.state.digitVaild))return a.setState({orderConfirm:!0,lastTwoDigit:s.lastTwoDigit}),!1;b.a.loading("loading"),a.props.dispatch({type:c,payload:s}).then(function(e){b.a.hide(),200===e.code?(a.props.dispatch({type:"orders/printDishes",payload:{orderId:e.data.orderId}}),window.location.href="#/orderCheck?orderId=".concat(e.data.orderId)):b.a.info(e.message,1)})},a.addMoreDish=function(){a.setState({digitVaild:!0},function(){a.eatInStore()})},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={storeId:this.props.storeId,tableNumber:this.props.tableNumber};this.getTableStatus(t).then(function(){"OCCUPIED"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).state&&(b.a.loading("loading"),e.scanOrder(t))})}},{key:"getTableStatus",value:function(e){return this.props.dispatch({type:"orders/tablesStatus",payload:e})}},{key:"render",value:function(){var e=this,t=this.props.orders,a=t.foodItems,n=void 0===a?[]:a,r=t.totalPrice,o=t.businessInfo,c=t.tableInfo,s=void 0===c?{}:c,l=this.state,u=l.orderList,d=void 0===u?[]:u,p=l.orderInfo;return i.a.createElement(oe,{title:"Cart",className:ae.a.order_preview,footer:i.a.createElement("div",{className:ae.a.confirm_footer},i.a.createElement("span",{onClick:this.checkOrderConfirm},"Place order"),i.a.createElement("span",{style:{marginTop:"0.08rem"},onClick:this.props.close},"Back to menu"))},this.state.orderConfirm&&i.a.createElement(de,{onSure:this.addMoreDish,lastTwoDigit:this.state.lastTwoDigit}),i.a.createElement("div",{className:ae.a.title},o.storeName),i.a.createElement("p",{className:ae.a.in_your_cart},"In your cart"),i.a.createElement("div",null,n.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,n=t.foodItem;return n.num?i.a.createElement("div",{className:ae.a.card,key:a},i.a.createElement("img",{src:"".concat(n.primaryPictureUrl),alt:""}),i.a.createElement("div",{className:ae.a.card_info},i.a.createElement("span",null,n.name),i.a.createElement("p",null,n.dailySpecialPrice?i.a.createElement("span",null,"$",n.dailySpecialPrice):i.a.createElement("span",null,"$",n.price))),i.a.createElement(q,{value:n.num,validZero:!0,confirm:e.sureConfrim,name:n.name,onChange:e.orderChange(n.foodItemId)})):null})),"OCCUPIED"===s.state&&i.a.createElement("div",{style:{opacity:"0.6"}},i.a.createElement("p",{className:ae.a.in_your_cart},"already ordered"),d.map(function(e,t){var a=e.foodItem,n=a.primaryPictureUrl;return i.a.createElement("div",{className:ae.a.card,key:t},i.a.createElement("img",{src:n,alt:""}),i.a.createElement("div",{className:ae.a.card_info},i.a.createElement("span",null,a.name),i.a.createElement("p",null,a.dailySpecialPrice?i.a.createElement("span",null,"$",a.dailySpecialPrice):i.a.createElement("span",null,"$",a.price))),i.a.createElement("span",{style:{color:"#27231F",width:"50px"}},"x",e.foodItemCount),i.a.createElement("span",{style:{color:"#27231F"}},"$",e.aggregatedPrice))})),i.a.createElement("div",{className:ae.a.price},i.a.createElement("div",{className:ae.a.line_flex},i.a.createElement("span",null,"Total:"),i.a.createElement("span",null,i.a.createElement("b",null,"$",Y(r,p.subTotal))))),i.a.createElement("div",{style:{paddingBottom:"0.24rem"}}),this.state.visible&&i.a.createElement(X,{close:this.toggleVisible,seconds:5,title:"You have placed your order",content:this.state.modalContent,btnText:"Check My Order",onOk:this.eatInStore}))}}]),t}(s.Component),fe=Object(n.connect)(function(e){return{orders:e.orders,orderInfo:e.orderInfo}})(me),he=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.orderChange=function(e){return function(t){a.props.dispatch({type:"orders/orderNumChange",payload:{foodItemId:e,num:t}})}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.foodItems,n=void 0===a?[]:a,r=t.category,o=t.categoryIndex;return i.a.createElement("div",{className:E.a.menu_section},i.a.createElement("div",{className:E.a.content_menu},function(){var t=[];return r.forEach(function(a,n){var r="",o=e.props.categoryIndex;o===n?r=E.a.active:o-1===n?r=E.a.pre_active:o+1===n&&(r=E.a.after_active),t.push(i.a.createElement("span",{key:n,className:r,onClick:e.props.setCategoryIndex(n)},a))}),t}()),i.a.createElement("div",{className:E.a.content_list},function(){var t=[],a=r[o];return n.forEach(function(n,r){var o=n.foodItem;n.foodItem.category===a&&(-1===o.primaryPictureUrl.indexOf("http")&&(o.primaryPictureUrl="http://".concat(o.primaryPictureUrl)),t.push(i.a.createElement("div",{className:E.a.content_card,key:r},i.a.createElement("div",{className:E.a.content_card_title},i.a.createElement("span",null,o.name)),i.a.createElement("div",{className:E.a.content_card_body},i.a.createElement("img",{src:o.primaryPictureUrl,alt:"",onClick:e.props.toggleShowOrderInfo(o.foodItemId)}),i.a.createElement("div",{className:E.a.content_card_intro},i.a.createElement("div",{className:E.a.content_card_section},i.a.createElement("span",{className:E.a.content_card_amount},"$",o.dailySpecialPrice?o.dailySpecialPrice:o.price),!!o.dailySpecialPrice&&i.a.createElement("span",{className:E.a.content_card_originPrice},"$",o.price)),i.a.createElement("div",{className:E.a.detail_card_star},i.a.createElement(T,{totalReviewScore:o.totalReviewScore,reviewTimes:o.reviewTimes})),i.a.createElement("div",{className:E.a.content_sold},i.a.createElement("span",null,n.orderTimes," sold"),i.a.createElement(q,{value:o.num,onChange:e.orderChange(o.foodItemId)})))))))}),t}()))}}]),t}(s.Component),_e=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).scanOrder=function(e){return a.props.dispatch({type:"orderInfo/scanOrder",payload:Object(y.a)({},e)})},a.setTab=function(e){return function(){a.setState({tab:e})}},a.setCategoryIndex=function(e){return function(){a.setState({categoryIndex:e})}},a.toggleShowOrderInfo=function(e){return function(){a.setState({foodItemId:e,showOrderInfo:!a.state.showOrderInfo})}},a.toggleOrderPreview=function(){a.setState({showOrderPreview:!a.state.showOrderPreview})},a.state={tab:1,storeId:localStorage.storeId,tableNumber:localStorage.tableNumber,categoryIndex:0,showOrderPreview:!1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.showLoading()}},{key:"componentDidMount",value:function(){var e=this,t=this.state.storeId;this.getBusinessInfo(t).then(function(){e.getFoodItems(t).then(function(){e.props.hideLoading()})}),this.getLabels(t),this.reviews(t)}},{key:"getBusinessInfo",value:function(e){return this.props.dispatch({type:"orders/getBusinessInfo",payload:{storeId:e}})}},{key:"getFoodItems",value:function(e){return this.props.dispatch({type:"orders/getFoodItems",payload:{storeId:e}})}},{key:"getLabels",value:function(e){return this.props.dispatch({type:"orders/customerLabels",payload:{storeId:e}})}},{key:"reviews",value:function(e){return this.props.dispatch({type:"orders/reviews",payload:{storeId:e}})}},{key:"render",value:function(){var e=this.props.orders,t=e.businessInfo,a=void 0===t?{}:t,n=e.foodItems,r=void 0===n?[]:n,o=e.labelsList,c=e.category,s=e.totalNum,l=e.totalPrice,u=e.reviewsList;return i.a.createElement("div",{className:E.a.orders,style:{background:"url(\n            ".concat(a.avatarPictureUrl,"\n          )")}},this.state.showOrderInfo&&i.a.createElement(ee,{foodItemId:this.state.foodItemId,close:this.toggleShowOrderInfo()}),this.state.showOrderPreview&&i.a.createElement(fe,{storeId:this.state.storeId||"109",tableNumber:this.state.tableNumber||"a010",close:this.toggleOrderPreview}),i.a.createElement("div",{className:E.a.header},i.a.createElement("img",{src:a.logoPictureUrl,alt:""}),i.a.createElement("div",null,i.a.createElement("div",{className:E.a.title},a.storeName),i.a.createElement("div",{className:E.a.subtitle},i.a.createElement("span",null,a.orderTimes," visits")))),i.a.createElement("div",{className:E.a.content},i.a.createElement("div",{className:E.a.content_nav},i.a.createElement("span",{className:1===this.state.tab?E.a.active:"",onClick:this.setTab(1)},"Menu"),i.a.createElement("span",{className:2===this.state.tab?E.a.active:"",onClick:this.setTab(2)},"About"),i.a.createElement("span",{className:3===this.state.tab?E.a.active:"",onClick:this.setTab(3)},"Reviews")),1===this.state.tab&&i.a.createElement("div",{className:E.a.content_body},i.a.createElement(he,Object.assign({},this.props,{setCategoryIndex:this.setCategoryIndex,foodItems:r,category:c,categoryIndex:this.state.categoryIndex,toggleShowOrderInfo:this.toggleShowOrderInfo}))),2===this.state.tab&&i.a.createElement("div",{className:E.a.content_body},i.a.createElement(O,Object.assign({},this.props,{businessInfo:a,labels:o}))),3===this.state.tab&&i.a.createElement("div",{className:E.a.content_body},i.a.createElement(W,{businessInfo:a,reviews:u,reviewStr:"comprehensiveScore"}))),s>0?i.a.createElement("div",{className:E.a.footer,onClick:this.toggleOrderPreview},i.a.createElement("div",{className:E.a.cart},i.a.createElement("span",null,"Cart (",s,")"),i.a.createElement("b",null),i.a.createElement("span",null,"$",l))):i.a.createElement("div",{className:E.a.footer,onClick:function(){b.a.info("Please choose your dishes first",1)}},i.a.createElement("div",{className:E.a.cart},i.a.createElement("span",null,"Cart"))))}}]),t}(i.a.Component),ve=Object(n.connect)(function(){return{orders:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).orders}})(z(_e)),be=a(17),ye=a.n(be),ge=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:P.a.info},i.a.createElement("span",null,this.props.label),i.a.createElement("span",{className:"".concat(this.props.bold?P.a.bold:"")},this.props.content))}}]),t}(s.Component),Ee=a(242),we=a.n(Ee),Ie={get:function(e,t){var a=t||window.location.href,n=e.replace(/[\[\]]/g,"\\$&"),r=new RegExp("[?&]".concat(n,"(=([^&#]*)|&|#|$)")).exec(a);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},replace:function(e,t,a){var n=a||window.location.href.toString(),r=new RegExp("".concat(e,"=[^&]*"),"gi");return(void 0===t||null===t||""===t?n.replace(r,""):n.replace(r,"".concat(e,"=").concat(t))).replace(/\?$/,"")},getAllParams:function(e){var t={};if(!e)return t;var a=new URL(e),n=new URLSearchParams(a.search),r=!0,o=!1,c=void 0;try{for(var s,i=n[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var l=s.value;t[l[0]]=l[1]}}catch(u){o=!0,c=u}finally{try{r||null==i.return||i.return()}finally{if(o)throw c}}return t}},Oe=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).transactionsOrder=function(e){a.props.dispatch({type:"global/transactionsOrder",payload:Object(y.a)({},e)}).then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a.setState({paymentList:e})})},a.orderDetail=function(e){a.props.dispatch({type:"orders/orderDetail",payload:Object(y.a)({},e)}).then(function(e){a.props.hideLoading(),a.setState({orderInfo:e,uuid:e.uuid&&e.uuid.substring(4,6)})})},a.orderdishes=function(e){a.props.dispatch({type:"orders/orderdishes",payload:Object(y.a)({},e)}).then(function(e){a.props.hideLoading(),a.setState({scanDishes:e})})},a.scanOrder=function(e){a.props.dispatch({type:"orderInfo/scanOrder",payload:Object(y.a)({},e)}).then(function(e){a.setState({orderInfo:e})})},a.scanDishes=function(e){a.props.dispatch({type:"orderInfo/scanDishes",payload:Object(y.a)({},e)}).then(function(e){a.props.hideLoading(),a.setState({scanDishes:e})})},a.watchEmail=function(e){var t=e.target.value,n=void 0===t?"":t;/\w+@[a-z0-9]+\.[a-z]{2,4}/.test(n)?a.setState({canSubmit:!0}):a.setState({canSubmit:!1}),n.length>0?a.setState({email:n,showCloseIcon:!0}):a.setState({showCloseIcon:!1})},a.clearPhone=function(){a.setState({email:"",canSubmit:!1,showCloseIcon:!1})},a.onOk=function(){a.props.dispatch({type:"global/emailReceipt",payload:{orderId:a.state.orderId,email:a.state.email}}).then(function(e){200===e.code?b.a.info("Send success"):e.message&&b.a.info(e.message)})},a.needHelp=function(){a.props.dispatch({type:"global/needHelp",payload:{orderId:a.state.orderId}}).then(function(e){200===e.code?b.a.info("success",1):b.a.info(e.message||"error",1)})};var n=Ie.get("orderId",window.location.href);return a.state={dinnerIn:!0,visible:!1,phoneNumber:"",orderId:n,tableNumber:localStorage.tableNumber,storeId:localStorage.storeId,scanDishes:[],orderInfo:{},email:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.showLoading(),this.getBusinessInfo(this.state.storeId),this.transactionsOrder({orderId:this.state.orderId}),this.orderDetail({orderId:this.state.orderId}),this.orderdishes({orderId:this.state.orderId})}},{key:"getBusinessInfo",value:function(e){this.props.dispatch({type:"orders/getBusinessInfo",payload:{storeId:e}})}},{key:"render",value:function(){var e=this,t=this.props.orders.businessInfo,a=void 0===t?{}:t,n=this.state,r=n.scanDishes,o=void 0===r?[]:r,c=n.orderInfo,s=void 0===c?{}:c;return i.a.createElement(oe,{title:"Order Summary",footer:i.a.createElement("div",null,"ONGOING"===s.state&&i.a.createElement("div",{className:ye.a.btn_list},i.a.createElement("span",{onClick:this.props.hocLink("#/orders")},"Order more"),i.a.createElement("span",{className:ye.a.active,onClick:this.props.hocLink("#/paymentPreview?orderId=".concat(this.state.orderId))},"Payment")),"TOREVIEW"===s.state&&i.a.createElement("div",{className:ye.a.confirm_footer},i.a.createElement("span",{onClick:this.props.hocLink("#/evaluate?orderId=".concat(this.state.orderId))},"Rate Now")))},i.a.createElement("div",{style:{paddingBottom:"0.24rem"}},i.a.createElement("div",{className:ye.a.title},a.storeName),i.a.createElement("p",{className:ye.a.cart_line},"In your cart"),i.a.createElement("div",null,o.map(function(e,t){var a=e.foodItem,n=void 0===a?{}:a,r=n.primaryPictureUrl;return i.a.createElement("div",{className:ye.a.card,key:t},i.a.createElement("img",{src:"".concat(r),alt:""}),i.a.createElement("div",{className:ye.a.card_info},i.a.createElement("span",null,n.name),i.a.createElement("p",null,n.dailySpecialPrice?i.a.createElement("span",null,"$",n.dailySpecialPrice):i.a.createElement("span",null,"$",n.price))),i.a.createElement("span",{style:{color:"#27231F"}},"x",e.foodItemCount))})),"ONGOING"===s.state&&i.a.createElement("div",null,i.a.createElement("div",{className:ye.a.price},i.a.createElement(ge,{label:"Order ID:",content:"".concat(s.orderId)}),i.a.createElement(ge,{label:"Order time:",content:L()(s.lastUpdatedAt).tz("America/Los_Angeles").format("HH:mm:ss DD-MM-YYYY")})),"ONGOING"===s.state&&i.a.createElement("div",null,s.paidAmount?i.a.createElement("div",{className:ye.a.price},i.a.createElement(ge,{label:"Subtotal:",content:"$".concat(s.subTotal)}),i.a.createElement(ge,{label:"Paid:",content:"$".concat(s.paidAmount)}),i.a.createElement(ge,{label:"Remaining balance:",content:"$".concat(s.remainingBalance),bold:!0})):i.a.createElement("div",{className:ye.a.price},i.a.createElement(ge,{label:"Subtotal:",content:"$".concat(s.subTotal),bold:!0})),i.a.createElement("img",{className:ye.a.order_help,src:we.a,alt:"",onClick:this.needHelp}))),("TOREVIEW"===s.state||"COMPLETED"===s.state)&&i.a.createElement("div",{className:ye.a.price},i.a.createElement(ge,{label:"Subtotal:",content:"$".concat(s.subTotal)}),i.a.createElement(ge,{label:"Tax:",content:"$".concat(s.tax)}),i.a.createElement(ge,{label:"Tips:",content:"$".concat(s.tip)}),i.a.createElement(ge,{label:"Total:",content:"$".concat(s.totalAmount),bold:!0})),("TOREVIEW"===s.state||"COMPLETED"===s.state)&&i.a.createElement("div",{className:ye.a.price},i.a.createElement("div",null,function(){var t=e.state.paymentList;return(void 0===t?[]:t).map(function(e,t){return i.a.createElement("div",null,i.a.createElement(ge,{label:"Transaction ID:",content:e.transactionId}),i.a.createElement(ge,{label:"Payment time:",content:L()(e.lastUpdatedAt).tz("America/Los_Angeles").format("HH:mm:ss DD-MM-YYYY")}))})}()),i.a.createElement("div",{className:"".concat(ye.a.show_more," ").concat(ye.a.under_handle)},i.a.createElement("span",null,"More Payments"),i.a.createElement("i",{className:ye.a.detail_more}))),("TOREVIEW"===s.state||"COMPLETED"===s.state)&&i.a.createElement("div",{className:ye.a.enter},i.a.createElement("p",null,"Send receipt to email"),i.a.createElement("div",{className:ye.a.email},i.a.createElement("input",{type:"text",value:this.state.email,onChange:this.watchEmail,placeholder:"Your email address"}),this.state.showCloseIcon?i.a.createElement("i",{className:ye.a.field_close,onClick:this.clearPhone}):i.a.createElement("i",{className:ye.a.field_edit}),this.state.canSubmit?i.a.createElement("span",{className:ye.a.active,onClick:this.onOk},"Confirm"):i.a.createElement("span",null,"Confirm")))))}}]),t}(s.Component),Ce=Object(n.connect)(function(e){return{orders:e.orders}})(z(Oe)),ke=a(37),xe=a.n(ke),Ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={active:1},a.customerCoupons=function(){a.props.dispatch({type:"paymentPreview/customerCoupons"})},a.selectCoupon=function(e){return function(){a.setState({active:e})}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return i.a.createElement(X,{className:xe.a.card_gift,title:"Gift Card",hideBtn:!0},i.a.createElement("p",{className:xe.a.card_gift_title},"Only one gift card can be applied at a time."),i.a.createElement("div",{className:xe.a.card_gift_section},function(){for(var t=[],a=0;a<=2;a++)t.push(i.a.createElement("div",{onClick:e.selectCoupon(a),className:"".concat(xe.a.section," ").concat(e.state.active===a&&xe.a.active," ").concat(2===a?xe.a.expire:""),key:a},i.a.createElement("div",{className:xe.a.section_left},i.a.createElement("span",null,"$29"),i.a.createElement("span",null,"off")),i.a.createElement("div",{className:xe.a.card_line}),i.a.createElement("div",{className:xe.a.section_middle},i.a.createElement("span",null,"Expire:"),i.a.createElement("span",null,"08/22/2019")),i.a.createElement("i",{className:xe.a.sign_icon})));return t}()))}}]),t}(s.Component),je=a(28),Ae=a.n(je);function Se(e,t){this.cover=null,this.ctx=null,this.scratchDiv=null,this.cardDiv=null,this.cHeight=0,this.cWidth=0,this.supportTouch=!1,this.events=[],this.startEventHandler=null,this.moveEventHandler=null,this.endEventHandler=null,this.opt={coverColor:"#C5C5C5",coverImg:"",ratio:.8,callback:null},this.init(e,t)}function Pe(e,t){return Array.prototype.forEach.call(e,function(e,a){t(e,a)})}function Te(e){e.preventDefault(),this.moveEventHandler=function(e){e.preventDefault();var t=this.supportTouch?e.touches[0]:e,a=this.cover.getBoundingClientRect(),n=document.documentElement.scrollTop||document.body.scrollTop,r=document.documentElement.scrollLeft||document.body.scrollLeft,o=t.pageX-a.left-r,c=t.pageY-a.top-n;this.ctx.beginPath(),this.ctx.fillStyle="#FFFFFF",this.ctx.globalCompositeOperation="destination-out",this.ctx.arc(o,c,10,0,2*Math.PI),this.ctx.fill()}.bind(this),this.cover.addEventListener(this.events[1],this.moveEventHandler,!1),this.endEventHandler=function(e){e.preventDefault(),this.opt.callback&&"function"===typeof this.opt.callback&&function(e,t,a){var n=e.getImageData(0,0,this.cWidth,this.cHeight),r=[];Pe(n.data,function(e,t){var a=n.data[t+3];0===a&&r.push(a)}),r.length/n.data.length>a&&t&&"function"===typeof t&&t()}.call(this,this.ctx,this.opt.callback,this.opt.ratio);this.cover.removeEventListener(this.events[1],this.moveEventHandler,!1),document.removeEventListener(this.events[2],this.endEventHandler,!1)}.bind(this),document.addEventListener(this.events[2],this.endEventHandler,!1)}Se.prototype.createCanvas=function(){if(this.cover=document.createElement("canvas"),this.cover.id="cover",this.cover.height=this.cHeight,this.cover.width=this.cWidth,this.ctx=this.cover.getContext("2d"),this.opt.coverImg){var e=this,t=new Image;t.src=this.opt.coverImg,t.onload=function(){e.ctx.drawImage(t,0,0,e.cover.width,e.cover.height)}}else this.ctx.fillStyle=this.opt.coverColor,this.ctx.fillRect(0,0,this.cover.width,this.cover.height);this.scratchDiv.appendChild(this.cover),this.cardDiv.style.opacity=1},Se.prototype.eventDetect=function(){"ontouchstart"in window&&(this.supportTouch=!0),this.events=this.supportTouch?["touchstart","touchmove","touchend"]:["mousedown","mousemove","mouseup"],this.addEvent()},Se.prototype.addEvent=function(){this.startEventHandler=Te.bind(this),this.cover.addEventListener(this.events[0],this.startEventHandler,!1)},Se.prototype.clearCover=function(){this.ctx.clearRect(0,0,this.cover.width,this.cover.height),this.cover.removeEventListener(this.events[0],this.startEventHandler),this.cover.removeEventListener(this.events[1],this.moveEventHandler),this.cover.removeEventListener(this.events[2],this.endEventHandler)},Se.prototype.init=function(e,t){if(function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}()){var a=this;Pe(arguments,function(e){if("object"===typeof e)for(var t in e)"callback"===t&&"function"===typeof e[t]?a.opt.callback=e[t].bind(a):t in a.opt&&(a.opt[t]=e[t]);else"function"===typeof e&&(a.opt.callback=e.bind(a))}),this.scratchDiv=document.getElementById("scratch"),this.cardDiv=document.getElementById("card"),this.scratchDiv&&this.cardDiv&&(this.cHeight=this.cardDiv.clientHeight,this.cWidth=this.cardDiv.clientWidth,this.cardDiv.style.opacity=0,this.createCanvas(),this.eventDetect())}else alert("\u5bf9\u4e0d\u8d77\uff0c\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301Canvas\uff0c\u65e0\u6cd5\u4f7f\u7528\u672c\u63a7\u4ef6\uff01")},Se.case=function(e,t){return new Se(e,t)};var De=Se.case,Le=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).orderDetail=function(e){a.props.dispatch({type:"orders/orderDetail",payload:Object(y.a)({},e)}).then(function(e){a.props.hideLoading(),a.setState({orderInfo:e})})},a.watchEmail=function(e){var t=e.target.value,n=void 0===t?"":t;/\w+@[a-z0-9]+\.[a-z]{2,4}/.test(n)?a.setState({canSubmit:!0}):a.setState({canSubmit:!1}),n.length>0?a.setState({email:n,showCloseIcon:!0}):a.setState({email:"",showCloseIcon:!1})},a.clearPhone=function(){a.setState({email:"",canSubmit:!1,showCloseIcon:!1})},a.toggleModal=function(){a.setState({visible:!a.state.visible})},a.onOk=function(){a.props.dispatch({type:"global/emailBind",payload:{amount:a.state.luckyAmount,email:a.state.email}}).then(function(e){b.a.info("Send success")})};var n=Ie.get("orderId",window.location.href);return a.state={hasClick:!1,orderId:n,tableNumber:localStorage.tableNumber,storeId:localStorage.storeId,orderInfo:{},email:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.showLoading(),this.orderDetail({orderId:this.state.orderId}),this.luckyDraw(),this.getBusinessInfo(this.state.storeId)}},{key:"luckyDraw",value:function(){var e=this;this.props.dispatch({type:"global/luckyDraw"}).then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.setState({luckyAmount:t.amount||0})})}},{key:"getBusinessInfo",value:function(e){this.props.dispatch({type:"orders/getBusinessInfo",payload:{storeId:e}})}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){De({ratio:.4},function(){e.toggleModal(),this.clearCover()})},100)}},{key:"render",value:function(){var e=this,t=this.state,a=t.orderInfo,n=t.luckyAmount,r=void 0===n?0:n,o=this.props.orders.businessInfo,c=void 0===o?{}:o;return i.a.createElement(oe,{title:"Payment Successful",footer:i.a.createElement("div",{className:Ae.a.btn_list},i.a.createElement("span",{onClick:this.props.hocLink("#/evaluate?orderId=".concat(this.state.orderId))},"Rate Now"),i.a.createElement("span",{onClick:this.props.hocLink("#/orderCheck?orderId=".concat(this.state.orderId)),className:Ae.a.active},"My Order"))},i.a.createElement("div",{className:Ae.a.payment_icon},i.a.createElement("span",null,"Payment Successful")),i.a.createElement("div",{className:Ae.a.title},i.a.createElement("p",null,c.storeName),i.a.createElement("p",null,"$",a.totalAmount)),i.a.createElement("div",{className:Ae.a.can_lottery},i.a.createElement("div",null,i.a.createElement("p",null,"Congrats! "),i.a.createElement("p",null,"You've got a chance to win a sweepstake!"),i.a.createElement("div",{className:Ae.a.can_lottery_section},i.a.createElement("div",{id:"scratch",className:Ae.a.scratch},!this.state.hasClick&&i.a.createElement("span",{onClick:function(){e.setState({hasClick:!0})}},"Click here to start"),i.a.createElement("div",{id:"card",className:Ae.a.scratch_card},"$",r))))),i.a.createElement("div",{className:Ae.a.order_ino},i.a.createElement(ge,{label:"Transaction ID:",content:a.transactionId}),i.a.createElement(ge,{label:"Time:",content:L()(a.lastUpdatedAt).tz("America/Los_Angeles").format("HH:mm:ss DD-MM-YYYY")})),this.state.luckyAmount&&i.a.createElement("div",{className:Ae.a.enter},i.a.createElement("p",null,"Send receipt to email"),i.a.createElement("div",{className:Ae.a.email},i.a.createElement("input",{type:"text",value:this.state.email,onChange:this.watchEmail,placeholder:"Your email address"}),this.state.showCloseIcon?i.a.createElement("i",{className:Ae.a.field_close,onClick:this.clearPhone}):i.a.createElement("i",{className:Ae.a.field_edit}),this.state.canSubmit?i.a.createElement("span",{className:Ae.a.active,onClick:this.onOk},"Confirm"):i.a.createElement("span",null,"Confirm"))),this.state.visible&&i.a.createElement(X,{title:"Congrats!",close:this.toggleModal,hideSeconds:!0,btnText:"Download Now"},i.a.createElement("div",{className:Ae.a.gift_card},i.a.createElement("span",null,"You won a $",r," gift card!"),i.a.createElement("span",null,"Download our app to use it."))))}}]),t}(s.Component),Me=Object(n.connect)(function(e){return{orders:e.orders}})(z(Le)),Re=a(50),Be=a(9),Ge=a.n(Be),Ue=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:P.a.border})}}]),t}(s.Component),Fe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selectAmount:0},a.selectAmount=function(e){return function(){a.setState({selectAmount:e},function(){0===e&&a.onOk()})}},a.watchAmount=function(e){var t=e.target.value,n=void 0===t?"":t;n.length>0?a.setState({amount:n,showCloseIcon:!0}):a.setState({amount:n,showCloseIcon:!1})},a.clearPhone=function(){a.setState({amount:"",showCloseIcon:!1})},a.closeAmount=function(){a.props.closeAmount&&a.props.closeAmount()},a.onOk=function(){a.state.amount<=a.props.remainingBalance?a.props.onOk({payType:a.state.selectAmount,amount:a.state.amount}):1===a.state.selectAmount&&b.a.info("The input amount should be less than the total amount$".concat(a.props.remainingBalance),3)},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,this.props.visibleAmount&&i.a.createElement(X,{hideBtn:!0,close:this.closeAmount,className:Ge.a.modal},i.a.createElement("div",{className:Ge.a.payment_modal},i.a.createElement("div",{className:"".concat(Ge.a.line_select," ").concat(0===this.state.selectAmount?Ge.a.active:""),onClick:this.selectAmount(0)},i.a.createElement("i",{className:Ge.a.sign_icon}),i.a.createElement("span",null,"All the remaining balance")),i.a.createElement("div",{style:{marginLeft:"0.28rem"}},i.a.createElement(Ue,null)),i.a.createElement("div",{className:"".concat(Ge.a.line_select," ").concat(1===this.state.selectAmount?Ge.a.active:""),onClick:this.selectAmount(1)},i.a.createElement("i",{className:Ge.a.sign_icon}),i.a.createElement("span",null,"Split the bill and pay the following amount")),1===this.state.selectAmount&&i.a.createElement("div",{className:Ge.a.email},i.a.createElement("input",{type:"text",value:this.state.amount,onChange:this.watchAmount,placeholder:"Minimum: $10"}),this.state.showCloseIcon?i.a.createElement("i",{className:Ge.a.field_close,onClick:this.clearPhone}):i.a.createElement("i",{className:Ge.a.field_edit}),this.state.amount>=10?i.a.createElement("span",{className:Ge.a.active,onClick:this.onOk},"Confirm"):i.a.createElement("span",null,"Confirm")))))}}]),t}(s.Component),He=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={selectAmount:0},a.selectAmount=function(e){return function(){a.setState({selectAmount:e})}},a.watchNumer=function(e){var t=e.target.value,n=void 0===t?"":t;n.length>0?a.setState({amount:n,showCloseIcon:!0}):a.setState({amount:n,showCloseIcon:!1})},a.clearPhone=function(){a.setState({amount:"",showCloseIcon:!1})},a.close=function(){a.props.visibleRate&&a.props.close()},a.onOk=function(e){return function(){a.props.onOk(e)}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,this.props.visibleRate&&i.a.createElement(X,{hideBtn:!0,close:this.close,className:Ge.a.modal},i.a.createElement("div",{className:Ge.a.payment_modal},i.a.createElement("div",{className:Ge.a.email,style:{margin:"0"}},i.a.createElement("input",{type:"text",value:this.state.amount,onChange:this.watchNumer,placeholder:"5%"}),this.state.showCloseIcon?i.a.createElement("i",{className:Ge.a.field_close,onClick:this.clearPhone}):i.a.createElement("i",{className:Ge.a.field_edit}),this.state.amount||0===this.state.amount?i.a.createElement("span",{className:Ge.a.active,onClick:this.onOk(this.state.amount)},"Confirm"):i.a.createElement("span",null,"Confirm")))))}}]),t}(s.Component),Ye=a(63),Ve=a.n(Ye),We=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={cardnumber:""},a.cardNumberChange=function(e){a.setState({cardnumber:e.target.value})},a.addbankCard=function(){var e=a.state,t=e.cardNumber,n=e.expMonth,r=e.expYear,o=e.cvs;a.props.dispatch({type:"bankCard/addbankCard",payload:{cardNumber:t,expMonth:n,expYear:r,cvs:o}})},a.inputChange=function(e){return function(t){a.setState(Object(Re.a)({},e,t.target.value),function(){var e=a.state,t=e.cardNumber,n=e.expMonth,r=e.expYear,o=e.cvs;t&&n&&r&&o?a.setState({showBtn:!0}):a.setState({showBtn:!1}),a.props.bankInfo({cardNumber:t,expMonth:n,expYear:r,cvs:o})})}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:Ve.a.page},i.a.createElement("p",null,"Enter your card information"),i.a.createElement("div",{className:Ve.a.bankcard_section},i.a.createElement("input",{className:Ve.a.bankcard_line,name:"addCreditCardNumber",type:"number",onChange:this.inputChange("cardNumber"),placeholder:"Card number"}),i.a.createElement("input",{className:Ve.a.bankcard_line,type:"number",onChange:this.inputChange("cvs"),placeholder:"CVV"}),i.a.createElement("span",{className:Ve.a.select_date},"Expiration date"),i.a.createElement("div",{className:"".concat(Ve.a.select_line)},i.a.createElement("input",{type:"number",placeholder:"MM",onChange:this.inputChange("expMonth"),id:"creditCardMonth",name:"creditCardMonth"}),i.a.createElement("input",{type:"number",placeholder:"YY",id:"creditCardYear",onChange:this.inputChange("expYear"),name:"creditCardYear"}))))}}]),t}(s.Component),ze=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).scanOrder=function(e){a.props.dispatch({type:"orderInfo/scanOrder",payload:Object(y.a)({},e)}).then(function(e){e.totalAmount&&a.setState({orderInfo:Object(y.a)({},e,{payAmount:e.remainingBalance})})})},a.scanDishes=function(e){a.props.dispatch({type:"orderInfo/scanDishes",payload:Object(y.a)({},e)}).then(function(e){a.props.hideLoading(),a.setState({scanDishes:e})})},a.toggleModal=function(e){return function(){a.setState(Object(Re.a)({},e,!a.state[e]))}},a.closeAmount=function(){a.toggleModal("visibleAmount")()},a.closeRate=function(){a.toggleModal("visibleRate")()},a.changeTips=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(){a.setState({orderInfo:Object(y.a)({},a.state.orderInfo,{tipRate:e})},function(){a.calcTotal()})}},a.hasSelectRate=function(e){var t=e/100;a.changeTips(t)(),a.closeRate()},a.hasSelectAmount=function(e){var t=e.payType,n=e.amount;0===t?a.setState({orderInfo:Object(y.a)({},a.state.orderInfo,{payAmount:a.state.orderInfo.remainingBalance})},function(){a.calcTotal()}):a.setState({orderInfo:Object(y.a)({},a.state.orderInfo,{payAmount:n})},function(){a.calcTotal()}),a.closeAmount()},a.calcTotal=function(){var e=a.state.orderInfo,t=F(H(e.tipRate,e.payAmount));a.setState({orderInfo:e,tipsPrice:t})},a.checkOrderConfirm=function(){var e=a.state,t=e.orderInfo,n=e.bankInfo,r=t.orderId,o=t.subTotal,c=t.tax,s=t.totalAmount,i=t.payAmount,l=t.tipRate,u=void 0===l?0:l,d=t.tip,p=n.cardNumber,m=n.expMonth,f=n.expYear,h=n.cvs;a.validBankInfo()?a.payments({orderId:r,subTotal:o,tax:c,tipRate:u,total:s,payAmount:i,tip:d,cardNumber:p,expMonth:m,expYear:f,cvs:h}):!1===a.state.useBankCard&&a.offlinePay({orderId:r,subTotal:o,tax:c,total:s,payAmount:i,tip:d,isOfflinePay:!0})},a.payments=function(e){a.props.dispatch({type:"paymentPreview/payments",payload:Object(y.a)({},e)}).then(function(e){200===e.code?a.props.hocLink("#/paymentResult?orderId=".concat(a.state.orderId))():b.a.info(e.message||"error",2)})},a.offlinePay=function(e){a.props.dispatch({type:"paymentPreview/offlinePay",payload:Object(y.a)({},e)}).then(function(e){200===e.code?(a.props.dispatch({type:"paymentPreview/printCheckout",payload:{orderId:a.state.orderId}}),a.props.hocLink("#/paymentResult?orderId=".concat(a.state.orderId))()):b.a.info(e.message||"error",2)})},a.bankCard=function(e){return function(){a.setState({useBankCard:e})}},a.bankInfo=function(e){a.setState({bankInfo:e})},a.validBankInfo=function(){if(a.state.useBankCard){var e=a.state.bankInfo,t=e.cardNumber,n=e.expMonth,r=e.expYear,o=e.cvs;return t?o?n?!!r||(b.a.info("Please enter your expYear",2),!1):(b.a.info("Please enter your expMonth",2),!1):(b.a.info("Please enter your card name",2),!1):(b.a.info("Please enter your card number",2),!1)}};var n=Ie.get("orderId",window.location.href);return a.state={useBankCard:!0,visibleAmount:!1,selectAmount:0,orderId:n,tableNumber:localStorage.tableNumber,storeId:localStorage.storeId,scanDishes:[],cardInfo:{},bankInfo:{},orderInfo:{}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.showLoading(),this.getBusinessInfo(this.state.storeId),this.scanOrder({tableNumber:this.state.tableNumber,storeId:this.state.storeId}),this.scanDishes({tableNumber:this.state.tableNumber,storeId:this.state.storeId})}},{key:"getBusinessInfo",value:function(e){this.props.dispatch({type:"orders/getBusinessInfo",payload:{storeId:e}})}},{key:"render",value:function(){var e=this,t=this.props.orders.businessInfo,a=void 0===t?{}:t,n=this.state,r=n.scanDishes,o=void 0===r?[]:r,c=n.orderInfo,s=void 0===c?{}:c,l=[.1,.15,.2,"other"];return i.a.createElement(oe,{title:"Payment",footer:i.a.createElement("div",{className:Ge.a.confirm_footer},i.a.createElement("span",{onClick:this.checkOrderConfirm},"Checkout\uff08$",Y(s.payAmount,this.state.tipsPrice),"\uff09"))},i.a.createElement("div",{className:Ge.a.title},a.storeName),i.a.createElement("div",{className:Ge.a.card_padding},o.map(function(e,t){var a=e.foodItem;return i.a.createElement("div",{className:Ge.a.card,key:t},i.a.createElement("div",{className:Ge.a.card_info},i.a.createElement("span",null,a.name),i.a.createElement("p",null,a.dailySpecialPrice?i.a.createElement("span",null,"$",a.dailySpecialPrice):i.a.createElement("span",null,"$",a.price))),i.a.createElement("span",{style:{color:"#27231F",width:"50px"}},"x",e.foodItemCount),i.a.createElement("span",{style:{color:"#27231F"}},"$",e.aggregatedPrice))})),i.a.createElement("div",{className:Ge.a.price},i.a.createElement(ge,{label:"Subtotal:",content:"$".concat(s.subTotal)})),i.a.createElement("div",{className:Ge.a.price},i.a.createElement("div",{className:Ge.a.line_flex},i.a.createElement("span",null,"Tax ",i.a.createElement("b",null,"x 10.1%")),i.a.createElement("span",null,"$",F(s.tax,2)))),i.a.createElement("div",{className:Ge.a.price},i.a.createElement("div",{className:"".concat(Ge.a.line_flex," ").concat(Ge.a.line_flex_spe)},i.a.createElement("span",null,"Tips ",i.a.createElement("b",null,"x"),i.a.createElement("strong",null,100*(s.tipRate||0),"%")),i.a.createElement("span",null,"$",F(H(s.tipRate,s.payAmount),2))),i.a.createElement("div",{className:Ge.a.line_tags},l.map(function(t,a){return"other"===t?i.a.createElement("span",{key:"other",onClick:e.toggleModal("visibleRate")},"other"):i.a.createElement("span",{key:a,className:s.tipRate===t?Ge.a.active:"",onClick:e.changeTips(t)},100*t,"%")}))),i.a.createElement("div",{className:Ge.a.price},i.a.createElement(ge,{label:"Order total:",content:"$".concat(s.totalAmount)}),i.a.createElement(ge,{label:"Paid:",content:"$".concat(V(s.totalAmount,s.remainingBalance))}),i.a.createElement(ge,{label:"Remaining balance:",content:"".concat(s.remainingBalance),bold:!0})),i.a.createElement("div",{className:Ge.a.price},i.a.createElement("div",{className:Ge.a.line_flex,onClick:this.toggleModal("visibleAmount")},i.a.createElement("span",null,"I\u2019d like to pay"),s.payAmount===s.remainingBalance?i.a.createElement("span",{className:Ge.a.line_flex_auto},"All the remaining balance"):i.a.createElement("span",{className:Ge.a.line_flex_auto},"$",s.payAmount),i.a.createElement("i",{className:Ge.a.arrow_right}))),i.a.createElement("div",{className:Ge.a.payment_method},i.a.createElement("p",null,"Payment method:"),i.a.createElement("div",{className:Ge.a.confirm_type},i.a.createElement("div",{className:this.state.useBankCard?Ge.a.active:"",onClick:this.bankCard(!0)},i.a.createElement("i",{className:Ge.a.sign_icon}),i.a.createElement("span",null,"Add a bank card")),i.a.createElement("div",{className:this.state.useBankCard?"":Ge.a.active,onClick:this.bankCard(!1)},i.a.createElement("i",{className:Ge.a.sign_icon}),i.a.createElement("span",null,"Payment offline"))),this.state.useBankCard&&i.a.createElement("div",null,i.a.createElement(We,{bankInfo:this.bankInfo}))),i.a.createElement(Fe,{closeAmount:this.closeAmount,onOk:this.hasSelectAmount,remainingBalance:this.state.orderInfo.remainingBalance,visibleAmount:this.state.visibleAmount}),i.a.createElement(He,{close:this.closeRate,visibleRate:this.state.visibleRate,onOk:this.hasSelectRate}))}}]),t}(s.Component),Ke=Object(n.connect)(function(e){return{orders:e.orders}})(z(ze)),Qe=(a(453),a(170)),Ze=a.n(Qe),Je=a(41),Xe=a(15),qe=a.n(Xe),$e=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={},a.setSelect=function(e){return function(){a.setState({imgIndex:e}),a.props.onChange(e+1)}},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"".concat(P.a.star_flex," ").concat(this.props.className?this.props.className:"")},function(){for(var t=[],a=0;a<=4;a++){var n=A.a;e.state.imgIndex>=a&&(n=k.a),t.push(i.a.createElement("img",{src:n,alt:"",key:a,onClick:e.setSelect(a)}))}return t}())}}]),t}(s.Component),et=a(2),tt=a.n(et),at=a(13),nt=a(243),rt=a.n(nt),ot=a(171),ct=a.n(ot);function st(e){return e.json()}function it(e){return e.status>=200&&e.status,e}function lt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var a in t.body=t.body?t.body:{},t.headers={"Content-type":"application/json",Authorization:localStorage.Authorization},t.body)void 0===t.body[a]&&delete t.body[a];return"POST"!==t.method&&"PUT"!==t.method||(t.body=JSON.stringify(t.body)),"POSTFORM"===t.method&&(t.headers={"Content-type":"application/x-www-form-urlencoded",Authorization:"Basic ".concat(window.btoa("celesea-app:celesea"))},t.method="POST",t.body=ct.a.stringify(t.body)),"GET"===t.method&&t.body&&(t.body=Object(y.a)({},t.body),e="".concat(e,"?").concat(ct.a.stringify(t.body)),delete t.body),rt()(e,t).then(it).then(st).then(function(e){return e}).catch(function(e){return{err:e}})}var ut="https://api.tableflash.com/v1";function dt(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("stores/".concat(t.storeId)),{method:"GET"}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("foodItems"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ht(e){return _t.apply(this,arguments)}function _t(){return(_t=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("hours/regular"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vt(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("foodItems/".concat(t.foodItemId)),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(e){return gt.apply(this,arguments)}function gt(){return(gt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("reviews/store"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Et(e){return wt.apply(this,arguments)}function wt(){return(wt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("reviews/foodItem"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function It(e){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("labels/customer"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ct(e){return kt.apply(this,arguments)}function kt(){return(kt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("cards/customer"),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xt(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("payments/web/cardNumber"),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jt(e){return At.apply(this,arguments)}function At(){return(At=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("payments/offlinePay"),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function St(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("orders/".concat(t.orderId)),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(e){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("orders/dishes"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Lt(e){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("reviews/web/storeAndFoodItem"),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rt(e){return Bt.apply(this,arguments)}function Bt(){return(Bt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("customerCoupons/web/emailBind"),{method:"PUT",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gt(e){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("orders/emailReceipt"),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ft(){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(at.a)(tt.a.mark(function e(){var t,a=arguments;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.abrupt("return",lt(la("customerCoupons/web/luckyDraw"),{method:"GET",body:Object(y.a)({},t)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yt(e){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("pictures/foodItem/".concat(t.foodItemId)),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wt(e){return zt.apply(this,arguments)}function zt(){return(zt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("orders/web/eatInStore"),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kt(e){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("orders/web/addMoreDishes"),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zt(e){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("orders/scan"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(e){return qt.apply(this,arguments)}function qt(){return(qt=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("orders/scanDishes"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $t(e){return ea.apply(this,arguments)}function ea(){return(ea=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("transactions/order"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ta(e){return aa.apply(this,arguments)}function aa(){return(aa=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("tables"),{method:"GET",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function na(e){return ra.apply(this,arguments)}function ra(){return(ra=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("printers/help?orderId=".concat(t.orderId)),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oa(e){return ca.apply(this,arguments)}function ca(){return(ca=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("printers/dishes?orderId=".concat(t.orderId)),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function sa(e){return ia.apply(this,arguments)}function ia(){return(ia=Object(at.a)(tt.a.mark(function e(t){return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lt(la("printers/checkout?orderId=".concat(t.orderId)),{method:"POST",body:Object(y.a)({},t)}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function la(e){return"".concat(ut,"/").concat(e)}var ua=a(465),da=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).orderdishes=function(e){a.props.dispatch({type:"orders/orderdishes",payload:Object(y.a)({},e)}).then(function(e){a.props.hideLoading(),a.setState({scanDishes:e})})},a.toggleArrow=function(){a.setState({arrow:!a.state.arrow})},a.toggleList=function(e){return function(){var t="arrow_list_".concat(e);a.setState(Object(Re.a)({},t,!a.state[t]))}},a.comprehensiveScore=function(e){a.setState({comprehensiveScore:e})},a.scoreContent=function(e){a.setState({scoreContent:e.target.value})},a.foodComprehensiveScore=function(e){return function(t){var n=Object(Je.a)(a.state.scanDishes);n[e].foodItem.comprehensiveScore=t,a.setState({scanDishes:n})}},a.foodContent=function(e){return function(t){var n=Object(Je.a)(a.state.scanDishes);n[e].foodItem.scoreContent=t.target.value,a.setState({scanDishes:n})}},a.confirm=function(){var e=[];a.state.scanDishes.forEach(function(t){var a=t.pictureIdList||[],n=[];a.forEach(function(e){n.push(e.pictureId)}),e.push({comprehensiveScore:t.foodItem.comprehensiveScore||0,foodItemId:t.foodItem.foodItemId,pictureIdList:n||[],scoreContent:t.foodItem.scoreContent||""})});var t=a.state.shopImage||[],n=[];t.forEach(function(e){n.push(e.id)});var r={comprehensiveScore:a.state.comprehensiveScore||0,foodItemReviews:[].concat(e),orderId:a.state.orderId,pictureIdList:n||[],scoreContent:a.state.scoreContent,storeId:a.state.storeId};a.props.dispatch({type:"global/storeAndFoodItem",payload:Object(y.a)({},r)}).then(function(){b.a.info("success",1),a.props.hocLink("#/")()})},a.imagesChange=function(e,t){return function(e,t,a){if(!a){var n=Object(ce.a)(n);b.a.loading("loading");var r="".concat(ut,"/pictures/customer/upload"),o=new FormData;o.append("picture",e[e.length-1].file),ua.ajax({url:r,type:"post",data:o,contentType:!1,processData:!1,success:function(e){var t=e.data,a=void 0===t?{}:t,r=n.state.scanDishes||[];r.forEach(function(e,t){e.pictureIdList=e.pictureIdList||[],e.pictureIdList.push({pictureId:a.pictureId,pictureUrl:a.pictureUrl})}),n.setState({scanDishes:r}),b.a.hide()},error:function(e){b.a.hide(),e.responseJSON&&200!==e.responseJSON.code&&b.a.info("error",1)}})}}},a.imagesShopChange=function(e,t,a){if(!a){var n=Object(ce.a)(n);b.a.loading("loading");var r="".concat(ut,"/pictures/customer/upload"),o=new FormData;o.append("picture",e[e.length-1].file),ua.ajax({url:r,type:"post",data:o,contentType:!1,processData:!1,success:function(e){var t=e.data,a=void 0===t?{}:t,r=n.state.shopImage||[];r.push({id:a.pictureId,url:a.pictureUrl}),n.setState({shopImage:r}),b.a.hide()},error:function(e){b.a.hide(),e.responseJSON&&200!==e.responseJSON.code&&b.a.info("error",1)}})}};var n=Ie.get("orderId",window.location.href);return a.state={orderId:n,storeId:localStorage.storeId,scanDishes:[],scoreContent:"",comprehensiveScore:"",shopImage:[]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getBusinessInfo(this.state.storeId),this.orderdishes({orderId:this.state.orderId})}},{key:"getBusinessInfo",value:function(e){this.props.dispatch({type:"orders/getBusinessInfo",payload:{storeId:e}})}},{key:"render",value:function(){var e=this,t=this.props.orders.businessInfo,a=void 0===t?{}:t,n=this.state.scanDishes,r=void 0===n?[]:n,o=i.a.createElement("div",{className:qe.a.confirm_footer},i.a.createElement("span",{onClick:this.confirm},"Submit"));return i.a.createElement(oe,{footer:o,title:"Rate your experience"},i.a.createElement("div",{className:qe.a.section},i.a.createElement("p",{className:qe.a.title},"Restaurant Overall"),i.a.createElement("div",{className:qe.a.res_evaluate},i.a.createElement("div",{className:qe.a.res_evaluate_section},i.a.createElement("img",{src:a.logoPictureUrl,alt:""}),i.a.createElement("span",null,a.storeName),i.a.createElement("div",{className:"".concat(qe.a.res_arrow," ").concat(this.state.arrow?qe.a.show_more:""),onClick:this.toggleArrow},i.a.createElement("i",{className:qe.a.detail_more}))),i.a.createElement($e,{onChange:this.comprehensiveScore,className:qe.a.big_star})),i.a.createElement("div",{className:"".concat(qe.a.evaluate_info," ").concat(this.state.arrow?qe.a.hide:"")},i.a.createElement("textarea",{className:qe.a.review_form,onChange:this.scoreContent,placeholder:"Please enter your review"}),i.a.createElement(Ze.a,{files:this.state.shopImage,onChange:this.imagesShopChange,onImageClick:function(e,t){return console.log(e,t)},selectable:this.state.shopImage.length<4,accept:"image/jpeg,image/jpg,image/png"}))),r.map(function(t,a){var n=t.foodItem,r=n.primaryPictureUrl||"",o=[];return(t.pictureIdList||[]).forEach(function(e,t){o.push({url:e.pictureUrl,id:e.pictureId})}),i.a.createElement("div",{className:qe.a.dishes_section,key:a},0===a&&i.a.createElement("p",{className:qe.a.title},"Restaurant Overall"),i.a.createElement("div",{className:qe.a.res_evaluate},i.a.createElement("div",{className:qe.a.res_evaluate_section},i.a.createElement("img",{src:r,alt:""}),i.a.createElement("span",null,i.a.createElement("b",null,n.name),i.a.createElement($e,{onChange:e.foodComprehensiveScore(a),className:qe.a.big_star})),i.a.createElement("div",{className:"".concat(qe.a.res_arrow," ").concat(e.state["arrow_list_".concat(a)]?qe.a.show_more:""),onClick:e.toggleList(a)},i.a.createElement("i",{className:qe.a.detail_more})))),i.a.createElement("div",{className:"".concat(qe.a.evaluate_info," ").concat(e.state["arrow_list_".concat(a)]?qe.a.hide:"")},i.a.createElement("textarea",{className:qe.a.review_form,onChange:e.foodContent(a),placeholder:"Please enter your review"}),i.a.createElement(Ze.a,{files:o,onChange:e.imagesChange(n.foodItemId,a),onImageClick:function(e,t){return console.log(e,t)},selectable:o.length<4,accept:"image/jpeg,image/jpg,image/png"})))}))}}]),t}(s.Component),pa=Object(n.connect)(function(e){return{orders:e.orders}})(z(da)),ma=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=Ie.get("tableNumber",window.location.href),t=Ie.get("storeId",window.location.href);e&&(localStorage.tableNumber=e),t&&(localStorage.storeId=t)}},{key:"render",value:function(){return i.a.createElement("div",{className:_.a.home},i.a.createElement("div",{className:_.a.home_body},i.a.createElement(f.Route,{component:ve,exact:!0,path:"/"}),i.a.createElement(f.Route,{component:ve,exact:!0,path:"/orders"}),i.a.createElement(f.Route,{component:ee,exact:!0,path:"/orderInfo"}),i.a.createElement(f.Route,{component:fe,exact:!0,path:"/orderPreview"}),i.a.createElement(f.Route,{component:Ce,exact:!0,path:"/orderCheck"}),i.a.createElement(f.Route,{component:de,exact:!0,path:"/orderConfirm"}),i.a.createElement(f.Route,{component:Ne,exact:!0,path:"/cardGift"}),i.a.createElement(f.Route,{component:Ke,exact:!0,path:"/paymentPreview"}),i.a.createElement(f.Route,{component:Me,exact:!0,path:"/paymentResult"}),i.a.createElement(f.Route,{component:pa,exact:!0,path:"/evaluate"}),i.a.createElement(f.Route,{component:We,exact:!0,path:"/bankCard"})))}}]),t}(s.Component),fa=Object(n.connect)()(ma);var ha=function(e){var t=e.history;return i.a.createElement(f.Router,{history:t},i.a.createElement(f.Switch,null,i.a.createElement(f.Route,{component:fa,exact:!0,path:"/"}),i.a.createElement(fa,null)))},_a=[{namespace:"global",state:{},effects:{luckyDraw:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(Ft,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o.data);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),emailBind:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(Rt,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o.data);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),emailReceipt:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(Gt,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),storeAndFoodItem:tt.a.mark(function e(t,a){var n,r;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(Lt,Object(y.a)({},n));case 5:return e.abrupt("return",!0);case 8:e.prev=8,e.t0=e.catch(2),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])}),needHelp:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(na,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),transactionsOrder:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r($t,Object(y.a)({},n));case 5:if(200!==(o=e.sent).code){e.next=10;break}return e.abrupt("return",o.data);case 10:return e.abrupt("return",[]);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:case"end":return e.stop()}},e,null,[[2,13]])})},reducers:{}},{namespace:"orders",state:{businessInfo:{},category:[],foodItems:[],labelsList:[]},effects:{getBusinessInfo:tt.a.mark(function e(t,a){var n,r,o,c;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,o=a.put,e.next=4,r(dt,Object(y.a)({},n));case 4:return c=e.sent,e.next=7,o({type:"businessInfo",payload:Object(y.a)({},c.data)});case 7:case"end":return e.stop()}},e)}),getFoodItems:tt.a.mark(function e(t,a){var n,r,o,c;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,o=a.put,e.next=4,r(mt,Object(y.a)({},n));case 4:return c=e.sent,e.next=7,o({type:"foodItemsList",payload:Object(Je.a)(c.data)});case 7:case"end":return e.stop()}},e)}),regularHours:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.next=4,r(ht,Object(y.a)({},n));case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}},e)}),customerLabels:tt.a.mark(function e(t,a){var n,r,o,c;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,o=a.put,e.next=4,r(It,Object(y.a)({},n));case 4:return c=e.sent,e.next=7,o({type:"labelsList",payload:Object(Je.a)(c.data)});case 7:case"end":return e.stop()}},e)}),reviews:tt.a.mark(function e(t,a){var n,r,o,c;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,o=a.put,e.prev=2,e.next=5,r(yt,Object(y.a)({},n));case 5:return c=e.sent,e.next=8,o({type:"reviewsList",payload:Object(Je.a)(c.data)});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[2,10]])}),tablesStatus:tt.a.mark(function e(t,a){var n,r,o,c;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,o=a.put,e.next=4,r(ta,Object(y.a)({},n));case 4:return c=e.sent,e.next=7,o({type:"tableInfo",payload:Object(y.a)({},c.data)});case 7:return e.abrupt("return",c.data);case 8:case"end":return e.stop()}},e)}),addMoreDishes:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(Kt,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),eatInStore:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,a.put,e.prev=2,e.next=5,r(Wt,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),orderDetail:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(St,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o.data);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),orderdishes:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(Tt,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o.data);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),printDishes:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(oa,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])})},reducers:{businessInfo:function(e,t){var a=t.payload;return e.businessInfo=a,Object(y.a)({},e)},foodItemsList:function(e,t){var a=t.payload,n=void 0===a?[]:a,r=[];return n.forEach(function(e){var t=e.foodItem.category;e.foodItem&&t&&-1===r.indexOf(t)&&r.push(t)}),e.category=r,e.foodItems=n,Object(y.a)({},e)},orderNumChange:function(e,t){var a=t.payload,n=0,r=0;return e.foodItems.forEach(function(e){e.foodItem.foodItemId===a.foodItemId&&(e.foodItem.num=a.num);var t=e.foodItem.num||0;n=Y(n,t);var o=e.foodItem.dailySpecialPrice||e.foodItem.price||0;r=Y(r,H(t,o||0))}),Object(y.a)({},e,{totalNum:n,totalPrice:r})},labelsList:function(e,t){var a=t.payload;return e.labelsList=a,Object(y.a)({},e)},reviewsList:function(e,t){var a=t.payload;return e.reviewsList=a,Object(y.a)({},e)},getFoodItemsDetail:function(e,t){var a=t.payload;return e.foodItems.forEach(function(t){Number(t.foodItem.foodItemId)===Number(a.foodItemId)&&(e.getFoodItemsDetail=t)}),Object(y.a)({},e)},tableInfo:function(e,t){var a=t.payload;return e.tableInfo=a,Object(y.a)({},e)}}},{namespace:"orderInfo",state:{foodItems:{},reviewsFoodItemList:[]},effects:{getFoodItemsDetail:tt.a.mark(function e(t,a){var n,r,o,c;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,o=a.put,e.next=4,r(vt,Object(y.a)({},n));case 4:return c=e.sent,e.next=7,o({type:"foodItemsDetail",payload:Object(y.a)({},c.data)});case 7:case"end":return e.stop()}},e)}),reviewsFoodItem:tt.a.mark(function e(t,a){var n,r,o,c;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,o=a.put,e.next=4,r(Et,Object(y.a)({},n));case 4:return c=e.sent,e.next=7,o({type:"reviewsFoodItemList",payload:Object(Je.a)(c.data)});case 7:case"end":return e.stop()}},e)}),scanOrder:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,a.put,e.next=4,r(Zt,Object(y.a)({},n));case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}},e)}),scanDishes:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,a.put,e.next=4,r(Xt,Object(y.a)({},n));case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}},e)}),foodItemPicGet:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,a.put,e.next=4,r(Yt,Object(y.a)({},n));case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}},e)})},reducers:{foodItemsDetail:function(e,t){var a=t.payload;return e.foodItems=a,Object(y.a)({},e)},reviewsFoodItemList:function(e,t){var a=t.payload;return e.reviewsFoodItemList=a,Object(y.a)({},e)}}},{namespace:"bankCard",state:{},effects:{addbankCard:tt.a.mark(function e(t,a){var n,r;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,a.put,e.prev=2,e.next=5,r(Ct,Object(y.a)({},n));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}},e,null,[[2,7]])})},reducers:{}},{namespace:"paymentPreview",state:{},effects:{payments:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,a.put,e.prev=2,e.next=5,r(xt,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),offlinePay:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,r=a.call,a.put,e.prev=2,e.next=5,r(jt,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])}),printCheckout:tt.a.mark(function e(t,a){var n,r,o;return tt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload,t.success,r=a.call,a.put,e.prev=2,e.next=5,r(sa,Object(y.a)({},n));case 5:return o=e.sent,e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[2,9]])})},reducers:{}}],va=a(244);new(a.n(va).a);var ba=r()();console.log("9ea14fa147d97d628290f5f2ad89005f935d1c9f"),_a.forEach(function(e){ba.model(e)}),ba.router(ha),ba.start("#root"),function(){if("serviceWorker"in navigator){if(new URL("/table.github.io",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/table.github.io","/service-worker.js");o?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):c(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):c(e)})}}()},63:function(e,t,a){e.exports={confirm_footer:"bankCard_confirm_footer__1EdYt",active:"bankCard_active__13wyB",arrow_right:"bankCard_arrow_right__2S04d",page:"bankCard_page__1ul7P",bankcard_section:"bankCard_bankcard_section__1b7dv",bankcard_line:"bankCard_bankcard_line__59TDa",select_date:"bankCard_select_date__3zk82",line:"bankCard_line__2_gEB",select_line:"bankCard_select_line__3U4it"}},9:function(e,t,a){e.exports={confirm_view:"paymentPreview_confirm_view__pX1br",confirm_view_body:"paymentPreview_confirm_view_body__2QEHu",title:"paymentPreview_title__JNjP0",card:"paymentPreview_card__3Oyjz",card_padding:"paymentPreview_card_padding__GXcKh",card_info:"paymentPreview_card_info__U57Z4",line_flex:"paymentPreview_line_flex__3psS0",line_flex_auto:"paymentPreview_line_flex_auto__1Y6oB",line_flex_spe:"paymentPreview_line_flex_spe__1CYIa",line_tags:"paymentPreview_line_tags__xBSFV",active:"paymentPreview_active__1aCJH",price:"paymentPreview_price__25Awo",confirm_type:"paymentPreview_confirm_type__3ufjO",sign_icon:"paymentPreview_sign_icon__2sce8",tips:"paymentPreview_tips__YOwxm",confirm_footer:"paymentPreview_confirm_footer__2vgK5",field_edit:"paymentPreview_field_edit__1q8QR",field_close:"paymentPreview_field_close__7eJVH",arrow_right:"paymentPreview_arrow_right__3Jy4X",confirm_coustom:"paymentPreview_confirm_coustom__1UZGK",order_help:"paymentPreview_order_help__1AwAu",btn_list:"paymentPreview_btn_list__ndmzi",email:"paymentPreview_email__1Q-Vj",detail_more:"paymentPreview_detail_more__3xdLi",show_more:"paymentPreview_show_more__2M6pz",under_handle:"paymentPreview_under_handle__1C0Tx",gift_card:"paymentPreview_gift_card__22XE0",payment_method:"paymentPreview_payment_method__16lMa",payment_line:"paymentPreview_payment_line__3kRrC",line_select:"paymentPreview_line_select__3pAz0",bank_icon:"paymentPreview_bank_icon__qaQxM",offline_icon:"paymentPreview_offline_icon__1AjhN",payment_modal:"paymentPreview_payment_modal__3w40h",modal:"paymentPreview_modal__psCcu",add_bank:"paymentPreview_add_bank__3PqTw"}}},[[246,1,2]]]);
//# sourceMappingURL=main.736068f6.chunk.js.map